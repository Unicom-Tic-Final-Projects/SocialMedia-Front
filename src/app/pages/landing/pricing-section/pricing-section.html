<section
  #pricingSection
  id="pricing"
  class="relative bg-gradient-to-b from-white via-[#F8FAFF] to-white text-[#222222] py-20 sm:py-28 md:py-36 lg:py-44 px-4 sm:px-6 md:px-8 lg:px-12 xl:px-16 overflow-hidden min-h-screen flex items-center"
  data-aos="fade-in"
  style="scroll-snap-align: start;"
>
  <!-- Professional Parallax Background -->
  <div
    #parallaxBg
    class="absolute inset-0 pointer-events-none transition-transform duration-100 ease-out will-change-transform gpu-accelerated"
  >
    <div class="absolute inset-0 opacity-20"
      style="background: 
        linear-gradient(to bottom, #FFFFFF 0%, #FFFFFF 20%, transparent 40%, transparent 60%, #FFFFFF 80%, #FFFFFF 100%),
        radial-gradient(circle at 50% 45%, rgba(191,201,255,0.2) 0%, rgba(255,214,232,0.15) 35%, transparent 70%);">
    </div>
    <div class="absolute top-1/2 left-1/4 w-[500px] h-[500px] bg-[#4C6FFF] rounded-full mix-blend-multiply filter blur-[120px] opacity-8 animate-blob will-change-transform"></div>
    <div class="absolute bottom-1/4 right-1/4 w-[450px] h-[450px] bg-[#BFC9FF] rounded-full mix-blend-multiply filter blur-[120px] opacity-8 animate-blob animation-delay-2000 will-change-transform"></div>
  </div>

  <div class="max-w-7xl mx-auto relative z-10 w-full">
    
    <!-- Professional Section Header -->
    <div class="text-center mb-16 sm:mb-20 md:mb-24" data-aos="fade-up">
      <div class="inline-flex items-center gap-2 bg-[#F8FAFF] border border-[#BFC9FF]/30 text-[#4C6FFF] px-4 py-2 rounded-full text-sm font-semibold mb-6">
        <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
          <path d="M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"/>
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z" clip-rule="evenodd"/>
        </svg>
        <span>Pricing Plans</span>
      </div>
      
      <h2 class="text-headline font-extrabold mb-6 text-[#1A1A1A]">
        Choose Your
        <span class="gradient-text">Perfect Plan</span>
      </h2>
      
      <p class="text-lg sm:text-xl text-[#222222]/70 max-w-2xl mx-auto leading-relaxed">
        Flexible pricing options designed to scale with your business needs
      </p>
    </div>

    <!-- Professional Pricing Cards -->
    @if (loading) {
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 max-w-7xl mx-auto">
        @for (item of [1,2,3,4]; track item) {
          <div class="card animate-pulse">
            <div class="h-8 bg-gray-300 rounded w-1/2 mb-4"></div>
            <div class="h-12 bg-gray-300 rounded w-3/4 mb-4"></div>
            <div class="space-y-3">
              <div class="h-4 bg-gray-300 rounded"></div>
              <div class="h-4 bg-gray-300 rounded"></div>
              <div class="h-4 bg-gray-300 rounded"></div>
            </div>
          </div>
        }
      </div>
    } @else {
      @if (plans.length > 0) {
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 sm:gap-8 max-w-7xl mx-auto">
        @for (plan of plans; track plan.id || plan.planId || $index; let i = $index) {
          <div
            [class]="'card group text-center relative ' + (plan.planId === 'Pro' ? 'border-2 border-[#4C6FFF] shadow-primary-lg transform scale-105' : '')"
            [attr.data-aos]="'fade-up'"
            [attr.data-aos-delay]="(i + 1) * 100"
          >
            @if (plan.planId === 'Pro') {
              <div class="absolute -top-4 left-1/2 transform -translate-x-1/2">
                <span class="bg-gradient-to-r from-[#4C6FFF] to-[#6F8AFF] text-white px-4 py-1.5 rounded-full text-xs font-bold shadow-lg">
                  MOST POPULAR
                </span>
              </div>
            }
            <div class="mb-6">
              <h3 class="text-2xl font-bold mb-2 text-[#1A1A1A]">{{ plan.name }}</h3>
              <div class="flex items-baseline justify-center gap-2 mb-2">
                <span class="text-5xl font-extrabold text-[#4C6FFF]">{{ formatPrice(plan.monthlyPrice) }}</span>
                <span class="text-lg text-[#222222]/60">
                  @if (plan.planId === 'Agency') {
                    /account/mo
                  } @else {
                    /mo
                  }
                </span>
              </div>
              <p class="text-sm text-[#222222]/60">{{ plan.description || 'Perfect for your needs' }}</p>
            </div>

            @if (plan.features && plan.features.length > 0) {
              <ul class="space-y-4 mb-8 text-left">
                @for (feature of plan.features; track feature) {
                  <li class="flex items-start gap-3">
                    <svg class="w-5 h-5 text-[#4C6FFF] flex-shrink-0 mt-0.5" fill="currentColor" viewBox="0 0 20 20">
                      <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
                    </svg>
                    <span class="text-[#222222]/80">{{ feature }}</span>
                  </li>
                }
              </ul>
            }

            <button (click)="selectPlan(plan)" class="btn-primary w-full">
              @if (plan.planId === 'Enterprise') {
                Contact Sales
              } @else if (plan.planId === 'Agency') {
                Get Started
              } @else {
                Get Started
              }
            </button>
          </div>
        }
      </div>
      } @else {
        <div class="text-center py-12">
          <p class="text-gray-600 mb-4">Unable to load pricing plans at the moment.</p>
          <p class="text-sm text-gray-500">Please try refreshing the page or contact support.</p>
        </div>
      }
    }

    <!-- Trust Message -->
    <div class="text-center mt-12 sm:mt-16">
      <p class="text-sm text-[#222222]/60">
        All plans include a 14-day free trial. No credit card required.
      </p>
    </div>
  </div>
</section>
