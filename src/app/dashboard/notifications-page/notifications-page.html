<div class="min-h-screen bg-[#FFFFFF] text-[#222222] p-6 animate-fadeIn">

  <h2 class="text-2xl font-semibold mb-6 text-[#4C6FFF] flex items-center gap-2 animate-slideDown">
    <i class="fa-solid fa-bell animate-pulse"></i> Notifications
  </h2>

  <!-- Filters -->
  <div class="flex flex-wrap gap-3 mb-6 animate-slideUp">

    <button 
      (click)="setFilter('all')"
      [class.bg-[#4C6FFF]]="filter() === 'all'"
      [class.text-white]="filter() === 'all'"
      [class.bg-[#F5F7FF]]="filter() !== 'all'"
      [class.text-[#1A1A1A]]="filter() !== 'all'"
      class="px-4 py-2 rounded-lg font-semibold hover:bg-[#3A56CC] hover:text-white transition border border-[#D9E1FF]">
      All
    </button>

    <button 
      (click)="setFilter('unread')"
      [class.bg-[#4C6FFF]]="filter() === 'unread'"
      [class.text-white]="filter() === 'unread'"
      [class.bg-[#F5F7FF]]="filter() !== 'unread'"
      [class.text-[#1A1A1A]]="filter() !== 'unread'"
      class="px-4 py-2 rounded-lg border border-[#D9E1FF] hover:bg-[#BFC9FF]/40 transition font-medium">
      Unread
    </button>

    <button 
      (click)="setFilter('read')"
      [class.bg-[#4C6FFF]]="filter() === 'read'"
      [class.text-white]="filter() === 'read'"
      [class.bg-[#F5F7FF]]="filter() !== 'read'"
      [class.text-[#1A1A1A]]="filter() !== 'read'"
      class="px-4 py-2 rounded-lg border border-[#D9E1FF] hover:bg-[#BFC9FF]/40 transition font-medium">
      Read
    </button>

  </div>

  <!-- Loading State -->
  @if (loading()) {
    <div class="space-y-4">
      @for (item of [1,2,3,4,5,6,7,8]; track item) {
        <div class="skeleton-activity-item">
          <div class="skeleton skeleton-circle w-12 h-12 flex-shrink-0"></div>
          <div class="flex-1 space-y-2">
            <div class="skeleton skeleton-text w-3/4"></div>
            <div class="skeleton skeleton-text w-full"></div>
            <div class="skeleton skeleton-text w-1/3" style="height: 0.875em;"></div>
          </div>
          <div class="skeleton skeleton-circle w-8 h-8 flex-shrink-0"></div>
        </div>
      }
    </div>
  } @else if (notifications().length === 0) {
    <!-- Empty State -->
    <div class="bg-[#F5F7FF] rounded-2xl p-12 text-center border border-[#D9E1FF]">
      <i class="fa-solid fa-bell-slash text-4xl text-gray-400 mb-4"></i>
      <p class="text-lg font-semibold text-[#1A1A1A] mb-2">No notifications</p>
      <p class="text-gray-600">You're all caught up! No {{ filter() === 'all' ? '' : filter() }} notifications to display.</p>
    </div>
  } @else {
    <!-- Notification List -->
    <div class="space-y-4">

      @for (notification of notifications(); track notification.id) {
        <div 
          [class.bg-white]="!notification.read"
          [class.bg-[#F5F7FF]/50]="notification.read"
          class="rounded-2xl p-5 flex items-start gap-4 shadow-md border border-[#D9E1FF] hover:bg-[#BFC9FF]/30 transition cursor-pointer"
          (click)="markAsRead(notification)">
          
          <div class="text-[#4C6FFF] text-xl flex-shrink-0">
            <i class="fa-solid" [ngClass]="getNotificationIcon(notification.type)"></i>
          </div>

          <div class="flex-1 min-w-0">
            <p class="font-semibold text-[#1A1A1A] mb-1">
              {{ notification.source }}
            </p>
            <p class="text-sm text-gray-600 mb-1">
              {{ notification.message }}
            </p>
            <p class="text-xs text-gray-500">
              {{ getTimeAgo(notification.createdAt) }}
            </p>
          </div>

          <div class="flex items-center gap-2 flex-shrink-0">
            @if (!notification.read) {
              <span class="w-2 h-2 bg-[#4C6FFF] rounded-full"></span>
            }
            <button 
              (click)="deleteNotification(notification); $event.stopPropagation()"
              class="text-gray-500 hover:text-red-600 transition p-2 rounded-lg hover:bg-red-50">
              <i class="fa-solid fa-trash"></i>
            </button>
          </div>

        </div>
      }

    </div>
  }

</div>
