<!-- Landing Page Theme Styling with Soft Glow -->
<div 
  class="relative bg-[#FFFFFF] text-[#222222] rounded-xl shadow-lg p-6 border border-[#D9E1FF] overflow-hidden max-h-[calc(100vh-200px)] overflow-y-auto"
>
  <!-- Soft Blue Glow Background -->
  <div
    class="absolute inset-0 pointer-events-none"
    style="
      background:
        radial-gradient(circle at 20% 30%, rgba(191, 201, 255, 0.15) 0%, transparent 60%),
        radial-gradient(circle at 80% 70%, rgba(255, 214, 232, 0.15) 0%, transparent 60%);
    "
  ></div>

  <div class="relative z-10">
    <h3 class="text-xl font-bold text-[#1A1A1A] mb-6 flex items-center gap-2 sticky top-0 bg-[#FFFFFF] pb-2 z-20">
      <i class="fa-solid fa-eye text-[#4C6FFF]"></i>
      How Your Post Will Look on Social Media
    </h3>

    @if (selectedPlatforms.length === 0) {
      <div class="text-center py-12 border border-dashed border-[#D9E1FF] rounded-xl bg-[#F5F7FF]/50">
        <i class="fa-solid fa-eye-slash text-4xl text-gray-400 mb-3"></i>
        <p class="text-gray-600 font-medium">Select social media accounts</p>
        <p class="text-gray-500 text-sm mt-1">Choose platforms to see how your post will look in their feeds</p>
      </div>
    }

    @else {
      <div class="space-y-8">
        @for (platform of selectedPlatforms; track platform) {
          @let platformAccounts = getAccountsByPlatform(platform);
          @let defaultConfig = getDefaultPlatformConfig(platform);

          <div class="bg-[#F5F7FF]/50 rounded-xl p-6 border border-[#D9E1FF] shadow-sm">
            <!-- Platform Header -->
            <div 
              class="flex items-center justify-between mb-6 pb-4 border-b border-[#D9E1FF]"
            >
              <div class="flex items-center gap-3">
                <div 
                  class="w-10 h-10 rounded-lg flex items-center justify-center"
                  [style.background]="defaultConfig.color + '20'"
                >
                  <i 
                    [class]="defaultConfig.icon" 
                    class="text-xl"
                    [style.color]="defaultConfig.color"
                  ></i>
                </div>
                <div>
                  <h4 class="font-bold text-[#1A1A1A] capitalize">{{ platform }}</h4>
                  <p class="text-xs text-gray-500">
                    {{ platformAccounts.length }} {{ platformAccounts.length === 1 ? 'account' : 'accounts' }} selected
                  </p>
                </div>
              </div>
            </div>

            <!-- Realistic Feed-Style Previews for Each Account -->
            <div class="space-y-6">
              @for (account of platformAccounts; track account.id) {
                <!-- Facebook Feed Style Preview -->
                @if (platform === 'facebook') {
                  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-md mx-auto">
                    <!-- Facebook Post Header -->
                    <div class="p-3 flex items-center gap-3 border-b border-gray-200">
                      <img 
                        [src]="getAccountProfilePicture(account)" 
                        [alt]="getAccountDisplayName(account)"
                        class="w-10 h-10 rounded-full object-cover border border-gray-200"
                        (error)="$event.target.src = getDefaultProfilePicture(account.platform)"
                      />
                      <div class="flex-1">
                        <p class="font-semibold text-[#050505] text-sm">{{ getAccountDisplayName(account) }}</p>
                        <p class="text-xs text-gray-500">{{ getTimeAgo() }} 路 <i class="fa-solid fa-globe text-xs"></i></p>
                      </div>
                      <button class="text-gray-400 hover:text-gray-600">
                        <i class="fa-solid fa-ellipsis"></i>
                      </button>
                    </div>

                    <!-- Facebook Post Content -->
                    @if (content) {
                      <div class="p-3 text-[#050505] text-sm leading-relaxed">
                        {{ getTruncatedContent(platform, content, getContentLimit(platform)) }}
                      </div>
                    }

                    <!-- Facebook Media -->
                    @if (hasMedia()) {
                      <div class="w-full">
                        @if (getMediaType() === 'video') {
                          <video [src]="mediaUrl!" class="w-full" controls muted>
                            Your browser does not support the video tag.
                          </video>
                        } @else {
                          <img [src]="mediaUrl!" alt="Post media" class="w-full object-cover" />
                        }
                      </div>
                    }

                    <!-- Facebook Engagement Bar -->
                    <div class="px-3 py-2 border-t border-gray-200">
                      <div class="flex items-center justify-between text-xs text-gray-500 mb-2">
                        <div class="flex items-center gap-1">
                          <i class="fa-solid fa-thumbs-up text-blue-600"></i>
                          <span>Like</span>
                        </div>
                        <div class="flex items-center gap-4">
                          <span>0 comments</span>
                          <span>0 shares</span>
                        </div>
                      </div>
                      <div class="flex items-center border-t border-gray-200 pt-2">
                        <button class="flex-1 flex items-center justify-center gap-2 py-2 text-gray-600 hover:bg-gray-100 rounded">
                          <i class="fa-regular fa-thumbs-up"></i>
                          <span class="text-sm font-medium">Like</span>
                        </button>
                        <button class="flex-1 flex items-center justify-center gap-2 py-2 text-gray-600 hover:bg-gray-100 rounded">
                          <i class="fa-regular fa-comment"></i>
                          <span class="text-sm font-medium">Comment</span>
                        </button>
                        <button class="flex-1 flex items-center justify-center gap-2 py-2 text-gray-600 hover:bg-gray-100 rounded">
                          <i class="fa-solid fa-share"></i>
                          <span class="text-sm font-medium">Share</span>
                        </button>
                      </div>
                    </div>
                  </div>
                }

                <!-- Instagram Feed Style Preview -->
                @if (platform === 'instagram') {
                  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-md mx-auto">
                    <!-- Instagram Post Header -->
                    <div class="p-3 flex items-center justify-between border-b border-gray-200">
                      <div class="flex items-center gap-3">
                        <img 
                          [src]="getAccountProfilePicture(account)" 
                          [alt]="getAccountDisplayName(account)"
                          class="w-8 h-8 rounded-full object-cover border border-gray-200"
                          (error)="$event.target.src = getDefaultProfilePicture(account.platform)"
                        />
                        <p class="font-semibold text-[#262626] text-sm">{{ getAccountDisplayName(account) }}</p>
                      </div>
                      <button class="text-gray-600">
                        <i class="fa-solid fa-ellipsis"></i>
                      </button>
                    </div>

                    <!-- Instagram Media -->
                    @if (hasMedia()) {
                      <div class="w-full bg-black">
                        @if (getMediaType() === 'video') {
                          <video [src]="mediaUrl!" class="w-full max-h-[600px] object-contain" controls>
                            Your browser does not support the video tag.
                          </video>
                        } @else {
                          <img [src]="mediaUrl!" alt="Post media" class="w-full object-contain max-h-[600px]" />
                        }
                      </div>
                    } @else {
                      <!-- Text-only Instagram post -->
                      <div class="w-full aspect-square bg-gradient-to-br from-purple-400 via-pink-500 to-red-500 flex items-center justify-center p-8">
                        <p class="text-white text-center font-medium text-lg">{{ content || 'Your post will appear here' }}</p>
                      </div>
                    }

                    <!-- Instagram Engagement Bar -->
                    <div class="px-4 py-3">
                      <div class="flex items-center justify-between mb-3">
                        <div class="flex items-center gap-4">
                          <button class="text-[#262626] hover:opacity-70">
                            <i class="fa-regular fa-heart text-2xl"></i>
                          </button>
                          <button class="text-[#262626] hover:opacity-70">
                            <i class="fa-regular fa-comment text-2xl"></i>
                          </button>
                          <button class="text-[#262626] hover:opacity-70">
                            <i class="fa-regular fa-paper-plane text-2xl"></i>
                          </button>
                        </div>
                        <button class="text-[#262626] hover:opacity-70">
                          <i class="fa-regular fa-bookmark text-2xl"></i>
                        </button>
                      </div>
                      <p class="text-sm font-semibold text-[#262626] mb-2">{{ getAccountDisplayName(account) }}</p>
                      @if (content) {
                        <div class="text-sm text-[#262626] leading-relaxed">
                          <span class="font-semibold">{{ getAccountDisplayName(account) }}</span>
                          <span class="ml-2">{{ getTruncatedContent(platform, content, getContentLimit(platform)) }}</span>
                        </div>
                      }
                      <p class="text-xs text-gray-500 mt-2">{{ getTimeAgo() }}</p>
                    </div>
                  </div>
                }

                <!-- LinkedIn Feed Style Preview -->
                @if (platform === 'linkedin') {
                  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-2xl mx-auto">
                    <!-- LinkedIn Post Header -->
                    <div class="p-4 flex items-start gap-3">
                      <img 
                        [src]="getAccountProfilePicture(account)" 
                        [alt]="getAccountDisplayName(account)"
                        class="w-12 h-12 rounded-full object-cover border border-gray-200"
                        (error)="$event.target.src = getDefaultProfilePicture(account.platform)"
                      />
                      <div class="flex-1">
                        <div class="flex items-center justify-between">
                          <div>
                            <p class="font-semibold text-[#0A66C2] text-sm">{{ getAccountDisplayName(account) }}</p>
                            <p class="text-xs text-gray-500">{{ getTimeAgo() }} 路 <i class="fa-solid fa-globe text-xs"></i></p>
                          </div>
                          <button class="text-gray-400 hover:text-gray-600">
                            <i class="fa-solid fa-ellipsis"></i>
                          </button>
                        </div>
                      </div>
                    </div>

                    <!-- LinkedIn Post Content -->
                    @if (content) {
                      <div class="px-4 pb-3 text-[#000000] text-sm leading-relaxed whitespace-pre-wrap">
                        {{ getTruncatedContent(platform, content, getContentLimit(platform)) }}
                      </div>
                    }

                    <!-- LinkedIn Media -->
                    @if (hasMedia()) {
                      <div class="w-full border-t border-gray-200">
                        @if (getMediaType() === 'video') {
                          <video [src]="mediaUrl!" class="w-full" controls>
                            Your browser does not support the video tag.
                          </video>
                        } @else {
                          <img [src]="mediaUrl!" alt="Post media" class="w-full object-cover" />
                        }
                      </div>
                    }

                    <!-- LinkedIn Engagement Bar -->
                    <div class="px-4 py-3 border-t border-gray-200">
                      <div class="flex items-center justify-between text-sm text-gray-600 mb-3">
                        <div class="flex items-center gap-6">
                          <button class="flex items-center gap-2 hover:text-[#0A66C2]">
                            <i class="fa-regular fa-thumbs-up"></i>
                            <span>Like</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-[#0A66C2]">
                            <i class="fa-regular fa-comment"></i>
                            <span>Comment</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-[#0A66C2]">
                            <i class="fa-regular fa-share"></i>
                            <span>Share</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-[#0A66C2]">
                            <i class="fa-regular fa-paper-plane"></i>
                            <span>Send</span>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                }

                <!-- Twitter/X Feed Style Preview -->
                @if (platform === 'twitter') {
                  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-xl mx-auto">
                    <!-- Twitter Post Header -->
                    <div class="p-4 flex items-start gap-3">
                      <img 
                        [src]="getAccountProfilePicture(account)" 
                        [alt]="getAccountDisplayName(account)"
                        class="w-12 h-12 rounded-full object-cover"
                        (error)="$event.target.src = getDefaultProfilePicture(account.platform)"
                      />
                      <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                          <p class="font-semibold text-[#0F1419] text-sm">{{ getAccountDisplayName(account) }}</p>
                          <p class="text-gray-500 text-sm">@{{ account.platformUsername || 'username' }}</p>
                          <span class="text-gray-500">路</span>
                          <p class="text-gray-500 text-sm">{{ getTimeAgo() }}</p>
                        </div>
                        
                        <!-- Twitter Post Content -->
                        @if (content) {
                          <div class="text-[#0F1419] text-sm leading-relaxed mb-3 whitespace-pre-wrap">
                            {{ getTruncatedContent(platform, content, getContentLimit(platform)) }}
                          </div>
                        }

                        <!-- Twitter Media -->
                        @if (hasMedia()) {
                          <div class="rounded-xl overflow-hidden mb-3 border border-gray-200">
                            @if (getMediaType() === 'video') {
                              <video [src]="mediaUrl!" class="w-full" controls>
                                Your browser does not support the video tag.
                              </video>
                            } @else {
                              <img [src]="mediaUrl!" alt="Post media" class="w-full object-cover" />
                            }
                          </div>
                        }

                        <!-- Twitter Engagement Bar -->
                        <div class="flex items-center justify-between text-gray-500 text-sm">
                          <button class="flex items-center gap-2 hover:text-blue-500">
                            <i class="fa-regular fa-comment"></i>
                            <span>0</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-green-500">
                            <i class="fa-regular fa-retweet"></i>
                            <span>0</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-red-500">
                            <i class="fa-regular fa-heart"></i>
                            <span>0</span>
                          </button>
                          <button class="flex items-center gap-2 hover:text-blue-500">
                            <i class="fa-regular fa-share"></i>
                          </button>
                        </div>
                      </div>
                    </div>
                  </div>
                }

                <!-- YouTube Feed Style Preview -->
                @if (platform === 'youtube') {
                  <div class="bg-white rounded-lg shadow-md border border-gray-200 overflow-hidden max-w-md mx-auto">
                    <!-- YouTube Thumbnail/Media -->
                    @if (hasMedia()) {
                      <div class="relative w-full bg-black">
                        @if (getMediaType() === 'video') {
                          <video [src]="mediaUrl!" class="w-full" controls>
                            Your browser does not support the video tag.
                          </video>
                        } @else {
                          <img [src]="mediaUrl!" alt="Video thumbnail" class="w-full aspect-video object-cover" />
                          <div class="absolute inset-0 flex items-center justify-center">
                            <div class="bg-black/70 rounded-full p-4">
                              <i class="fa-solid fa-play text-white text-2xl"></i>
                            </div>
                          </div>
                        }
                      </div>
                    } @else {
                      <div class="w-full aspect-video bg-gradient-to-br from-red-500 to-red-700 flex items-center justify-center">
                        <i class="fa-brands fa-youtube text-white text-6xl"></i>
                      </div>
                    }

                    <!-- YouTube Video Info -->
                    <div class="p-3 flex gap-3">
                      <img 
                        [src]="getAccountProfilePicture(account)" 
                        [alt]="getAccountDisplayName(account)"
                        class="w-10 h-10 rounded-full object-cover flex-shrink-0"
                        (error)="$event.target.src = getDefaultProfilePicture(account.platform)"
                      />
                      <div class="flex-1 min-w-0">
                        <h3 class="font-semibold text-[#0F0F0F] text-sm line-clamp-2 mb-1">
                          {{ content || 'Your video title' }}
                        </h3>
                        <p class="text-xs text-gray-600">{{ getAccountDisplayName(account) }}</p>
                        <div class="flex items-center gap-2 mt-1 text-xs text-gray-600">
                          <span>0 views</span>
                          <span>路</span>
                          <span>{{ getTimeAgo() }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                }
              }
            </div>
          </div>
        }
      </div>
    }
  </div>
</div>
